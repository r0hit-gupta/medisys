<% include header %>
<body>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/Chart.js/0.2.0/Chart.min.js"></script>
	<% include infobars %>
	
	<div class="content" id="content-widget">
		<style scoped>
		.widget {
			display: inline-block;
			width: 48%;
			height: 50%;
			box-sizing: border-box;
			box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);
			margin: 10px;
			border: none;
			border-radius: 0px;
			overflow: hidden;
		}
		#content-widget {
			padding: 100px 200px;
		}
		.widget-heading {
			width: 100%;
			height: 50px;
			position: relative;
			top: 0;
			background: #e74c3c;
			padding: 10px 25px;
			font-weight: bold;
			color: white;
			font-size: 20px;
		}
		.widget-content {
			width: 100%;
			padding: 15px;
		}
		#widget1 .widget-heading  {
		background: #4dae50;
		}
		#widget2 .widget-heading {
		background: #16a085;
		}
		#widget3 .widget-heading {
		background: #63393E;
		}
		#widget4 .widget-heading {
		background: #2c3e50;
		}
		.chart {
			width: auto;
			height: auto;
			margin: 0 auto;
		}

		</style>
		<div class="widget" id="widget1">
			<div class="widget-heading">MONTHLY SALES OVERVIEW</div>
			<div class="widget-content" align="center">
				<div class='chart' id='p1'>
					<canvas id='c1'></canvas>
				</div>
				
			</div>
		</div>
		<div class="widget" id="widget2">
			<div class="widget-heading">ONLINE MEDICINE SEARCH</div>
			<div class="widget-content">
				
			</div>
		</div>
		
		<div class="widget" id="widget3">
			<div class="widget-heading">NOTES FROM THE ADMIN</div>
			<div class="widget-content" align="center">
				
			</div>
		</div>
		<div class="widget" id="widget4">
			<div class="widget-heading">PRODUCTS EXPIRING IN 3 MONTHS</div>
			<div class="widget-content" align="center">
				
			</div>
		</div>
	</div>
	<script>
	
	<%
	function salesDataToArray(data){
		var saleData = [];
		for(var i=0; i<data.length; i++){
			if(data[i]._id.year == 2016){
				saleData[data[i]._id.month - 1] = data[i].sales ;
			}
		}
		return saleData;
	}
	var monthSales = monthSales;
	monthSales = salesDataToArray(monthSales);
	%>
	console.log([<%= monthSales %>]); 

	// Monthly Sales Chart
	var c1 = document.getElementById("c1");
	var parent = document.getElementById("p1");
	c1.width = 500;
	c1.height = 300;  
	var data1 = {
	labels : ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],
	datasets : [
	{
	fillColor : "rgba(231, 76, 60, .1)",
	strokeColor : "rgba(231, 76, 60, 1)",
	pointColor : "#0af",
	pointStrokeColor : "rgba(255,255,255,1)",
	data : [<%= monthSales %>]
	}
	]
	}
	var options1 = {
	scaleFontColor : "rgba(231, 76, 60, 1)",
	scaleLineColor : "rgba(231, 76, 60, 1)",
	scaleGridLineColor : "transparent",
	bezierCurve : false,
	scaleOverride : true,
	scaleSteps : 10,
	scaleStepWidth : 100,
	scaleFontStyle: "bold",
	datasetStrokeWidth : 3,
	scaleLineWidth: 3,
	scaleStartValue : 0,
	scaleShowGridLines : true,
    scaleGridLineColor : "rgba(0,0,0,.05)",
    scaleGridLineWidth : 1
	}
	new Chart(c1.getContext("2d")).Line(data1,options1);
	</script>
</body>
</html>